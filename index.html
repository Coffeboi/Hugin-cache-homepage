<!DOCTYPE html>
<!-- Written by TechyGuy (TechyGuy#3470 @ discord, techy@novastack.org) for hugin cache, comes with no warranty but no copyright either. The code is free to edit however you want -->
<html>

<head>
  <link rel="stylesheet" href="https://fonts.google.com/specimen/VT323">
  <link href="./style.css" rel="stylesheet">

</head>

<body>

  <h2>Last 100 messages:</h2>
  <h5>Want more? Use the api instead! {{'https://cache.hugin.chat/api/v1/posts?size=100'}}</h5>

  <script>
    fetch('https://cache.hugin.chat/api/v1/posts?size=100')
      .then((response) => {
        return response.json()
      })
      .then((json) => {
        var temp = "";

        json.items.forEach(item => {
          let username = item.nickname
          if (username == null) {
            username = "Anonymous"
          }
          let board = item.board
          if (item.board.startsWith('SEKR') == true) {
            board = item.board.slice(0, 10) + ".....";
          }

          temp += "<tr>";
          temp += "<td>" + username + "</td>";
          temp += "<td>" + item.message + "</td>";
          temp += "<td>" + board + "</td>";
          temp += "<td>" + new Date(item.time * 1000) + "</td>";
          document.getElementById('item').innerHTML = temp;
        })
      })

  </script>

  <div class="container">
    <table class="table">
      <thead>
        <tr>
          <th>Nickname</th>
          <th>Message</th>
          <th>Board</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
      <tbody id="item">
      </tbody>
    </table>
  </div>
</body>

</html>